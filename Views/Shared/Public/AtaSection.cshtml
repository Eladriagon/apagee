@model (ArticleListViewModel vm, string context)

<aside class="ata">

    @if (@Model.vm.SiteSettings?.ODataTitle is string title)
    {
        <div class="site-header">
            <span class="title">
                <a href="/">@title</a>
            </span>
        </div>
    }
    
    <div class="ata-header">
        Author
    </div>
    
    @if (Model.vm.SiteSettings?.AuthorAvatar is not null)
    {
        <a href="/@@@(GlobalConfiguration.Current!.FediverseUsername)">
            <img class="ata-avatar" alt="Profile picture for @(Model.vm.AuthorDisplayName ?? Model.vm.AuthorUsername)" src="/avatar.png" />
        </a>
    }

    <div class="author">
        @if (Model.vm.AuthorDisplayName is string { Length: > 0 } displayName)
        {
            @if (Model.vm.SiteSettings?.AuthorAvatar is null)
            {
                <a href="/@@@(GlobalConfiguration.Current!.FediverseUsername)" class="display">@displayName</a>
            }
            else
            {
                <span class="display">@displayName</span>
            }   
        }
        <span class="username">@@@(Model.vm.AuthorUsername)</span>
    </div>
    @if (Model.vm.AuthorBio is string { Length: > 0 } bio)
    {
        <div class="bio">
            @bio
        </div>
    }
    <div class="properties">
        @foreach (var prop in new[] {
            new { key = Model.vm.SiteSettings?.Property1Key, value = Model.vm.SiteSettings?.Property1Value, valueFormatted = Model.vm.SiteSettings?.Property1Formatted },
            new { key = Model.vm.SiteSettings?.Property2Key, value = Model.vm.SiteSettings?.Property2Value, valueFormatted = Model.vm.SiteSettings?.Property2Formatted },
            new { key = Model.vm.SiteSettings?.Property3Key, value = Model.vm.SiteSettings?.Property3Value, valueFormatted = Model.vm.SiteSettings?.Property3Formatted }
        })
        {
            @if (prop.key is string { Length: > 0} && prop.value is string { Length: > 0})
            {
                <div class="prop">
                    <span class="key">@prop.key</span>
                    <span class="value">@Html.Raw(prop.valueFormatted)</span>
                </div>
            }
        }
    </div>
    @if (Model.vm.FollowerCount is not null)
    {
        <div class="stats">
            <div class="stat">
                <span class="value">@Model.vm.FollowerCount</span>
                <span class="label">follower@(Model.vm.FollowerCount is 1 ? "" : "s")</span>
            </div>
            @if (Model.context == "single")
            {
                <div class="stat">
                    <span class="value">@Model.vm.Articles.First().Likes</span>
                    <span class="label">like@(Model.vm.Articles.First().Likes is 1 ? "" : "s")</span>
                </div>
                <div class="stat">
                    <span class="value">@Model.vm.Articles.First().Shares</span>
                    <span class="label">boost@(Model.vm.Articles.First().Shares is 1 ? "" : "s")</span>
                </div>
            }
        </div>
    }
</aside>
